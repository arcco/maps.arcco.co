<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Mapa b√°sico de colombia con d3js</title>
  <style>

    @import url(../style.css);

    .pais {
      fill: none;
      stroke: #252;
      stroke-linejoin: round;
      stroke-width: 3
    }

    .departamentos {
      fill: none;
      stroke: #fcf;
      stroke-linejoin: round;
      stroke-width: 2
    }


    .municipios {
      fill: none;
      stroke: #777;
      stroke-dasharray: 2,2;
      stroke-linejoin: round;
    }

    .graticule {
      stroke: #aaa;
      fill: none;
    }

    .equator {
      stroke: red;
    }

  </style>
</head>
<body>
  <script src="/assets/js/vendor/d3.v3.min.js"></script>
  <script src="/assets/js/vendor/topojson.v1.min.js"></script>

  <script>
    var width = 900;
    var height = width/1.3;

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

    var proj = d3.geo.transverseMercator()
                      .center([0, 4.5])
                      .rotate([74, 0])
                      .scale((height * 67) / 21)
                      .clipAngle(90 + 1e-6)
                      .translate([(width / 2), (height / 2)]);

    var path = d3.geo.path().projection(proj);

    var mymap = svg.append("svg:g")
                    .attr("id", "mymap");

    var graticule = d3.geo.graticule();

    mymap.append("path")
        .datum(graticule)
        .attr("class", "graticule")
        .attr("d", path);
    mymap.append("path")
        .datum({type: "LineString", coordinates: [[-180, 0], [-90, 0], [0, 0], [90, 0], [180, 0]]})
        .attr("class", "equator")
        .attr("d", path);

    d3.json("/data/topojson/colombia.json", function(error, geodata) {
      var pais = topojson.feature(geodata, geodata.objects.pais);
      mymap.append("path")
        .datum(pais)
        .attr("class", "pais")
        .attr("d", path);

      var deptos = topojson.feature(geodata, geodata.objects.departamentos);
      mymap.append("path")
        .datum(topojson.mesh(geodata, geodata.objects.departamentos, function(a, b) { return a !== b; }))
        .attr("class", "departamentos")
        .attr("d", path);

      var muni = topojson.feature(geodata, geodata.objects.municipios);
      mymap.append("path")
        .datum(topojson.mesh(geodata, geodata.objects.municipios, function(a, b) { return a !== b; }))
        .attr("class", "municipios")
        .attr("d", path);
    });
  </script>
</body>
</html>